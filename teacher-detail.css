/* ... [Phần Reset & Intro giữ nguyên code cũ] ... */
html, body { scrollbar-width: none; -ms-overflow-style: none; }
html::-webkit-scrollbar, body::-webkit-scrollbar { display: none; }
.detail-page { background-color: #f4f1ea; color: var(--c-brown); overflow-x: hidden; }
body.detail-page.is-locked { overflow: hidden; height: 100vh;}
body.detail-page:not(.is-locked) { overflow-y: auto; height: auto; }
.read-progress { position: fixed; top: 0; left: 0; width: 100%; height: 4px; z-index: 9999; background: transparent; }
.read-progress .bar { display: block; height: 100%; width: 0%; background: var(--c-brown); }
:root{
  --c-sage:#dbe7c6;
  --c-cream:#f7f2e7;
  --c-brown:#5d4037;
  --c-dark-green:#2e3b2c;
  --c-sunset:#ff8c69; 
  --c-sunset-dark:#8a3b20;
  
  --font-main:'Nunito',sans-serif;
  --font-hand:'Dancing Script',cursive;
  --font-hand-2:'Patrick Hand',cursive;

  --torn-mask: url("https://uploads-ssl.webflow.com/5f2b562a12f5f74787d56e3b/5f2b562a12f5f71e84d56e84_torn-paper-edge.png");
}

/* INTRO: Nền Kem */
.intro-overlay { position: fixed; inset: 0; z-index: 10000; background: #f7f2e7; display: flex; justify-content: center; align-items: center; overflow: hidden; }
.intro-strips-container { position: absolute; inset: 0; display: flex; width: 100%; height: 100%; }
.intro-strip { flex: 1; background: #222; overflow: hidden; position: relative; border-right: 2px solid #000; }
.intro-strip::before, .intro-strip::after { content: ""; position: absolute; top: 0; bottom: 0; width: 8px; z-index: 5; background-image: linear-gradient(#000 6px, transparent 6px); background-size: 100% 12px; }
.intro-strip::before { left: 2px; } .intro-strip::after { right: 2px; }
.intro-strip-img { width: 100%; height: 100%; object-fit: cover; transform: scale(1.2); opacity: 0.9;}
.intro-final-layer { position: absolute; inset: 0; z-index: 5; display: flex; justify-content: center; align-items: center; background: transparent; opacity: 0; pointer-events: none; }
.intro-final-wrapper { width: 100%; height: 100%; overflow: hidden; }
.intro-final-img { width: 100%; height: 100%; object-fit: cover; box-shadow: inset 0 0 150px rgba(0,0,0,0.7);}
.intro-brand { position: absolute; z-index: 10; color: #5d4037; font-weight: 900; font-family: 'Courier New', monospace; font-size: 3rem; letter-spacing: 0.2em; text-transform: uppercase; }

/* HERO */
.d-hero { width: 100%; height: 100vh; position: relative; overflow: hidden; background: #000; perspective: 1000px; }
.hero-cover { 
    position: absolute; inset: 0; background-size: cover; 
    background-position: center; 
    /* TRẠNG THÁI MỚI: Tối hơn (0.4) để khi sáng lên sẽ tạo hiệu ứng bừng tỉnh */
    filter: brightness(0.7) contrast(1.1) sepia(0.1); 
    transform: scale(1); 
    will-change: filter, transform; /* Giúp trình duyệt render mượt hơn */
    transition: filter 0.4s ease; /* Dự phòng cho mobile */
}
.hero-glow { position: absolute; inset: 0; background: linear-gradient(180deg, transparent 30%, rgba(0,0,0,0.85) 100%); z-index: 1; }

/* LAYER A: BÌA (CENTER) */
.hero-center-layer {
    position: absolute; inset: 0; z-index: 20;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    pointer-events: none; text-align: center;
    padding-bottom: 5vh;
}

/* CHỈNH SỬA: STYLE WECHOICE */
.center-brand {
    font-family: 'Anton', sans-serif; /* Font đậm, đứng */
    font-size: clamp(3rem, 7vw, 6rem); /* To */
    line-height: 1;
    letter-spacing: 0.2em; /* Trải dài ra */
    color: rgba(255,255,255,0.9);
    text-transform: uppercase;
    margin-bottom: auto; 
    margin-top: 3vh;
    text-shadow: none; /* Bỏ bóng */
}

.center-title { margin-top: 300px; margin-bottom: auto;}

/* CHỈNH SỬA: TÊN THẦY CÔ THẲNG */
.full-name {
    font-size: clamp(4rem, 10vw, 8rem);
    line-height: 1.1;
    color: #fffef0;
    text-shadow: 0 5px 25px rgba(0,0,0,0.9);
    transform: none; /* Bỏ nghiêng */
    font-weight: 700;
    font-family: var(--font-hand);
}
.center-line { width: 150px; height: 2px; background: var(--c-sage); margin: 30px auto; opacity: 0.7; }
.role-cover { color: rgba(255,255,255,0.9); font-size: 1.5rem; letter-spacing: 2px; text-transform: uppercase; }
.scroll-indic-center { position: absolute; bottom: 5vh; color: rgba(255,255,255,0.6); font-family: var(--font-hand-2); display: flex; flex-direction: column; align-items: center; gap: 10px; opacity: 0; animation: fadeIn 1s 2s forwards; }

/* LAYER B: DETAIL & NAV */
.start-hidden { opacity: 0; pointer-events: none; visibility: hidden; }
.hero-inner { position: relative; z-index: 2; width: 100%; height: 100%; display: flex; align-items: flex-end; justify-content: space-between; padding: 0 5vw 8vh; }
.hero-left { max-width: 800px; color: #fff; text-shadow: 0 4px 20px rgba(0,0,0,0.8); }
.hero-name-small { font-size: 4rem; color: #fff; line-height: 1; margin-bottom: 15px; font-family: var(--font-hand);}
.hero-kicker { display: inline-flex; align-items: center; gap: 10px; padding: 8px 16px; border-radius: 99px; background: rgba(255,255,255,0.15); backdrop-filter: blur(5px); border: 1px solid rgba(255,255,255,0.2); font-family: var(--font-hand-2); font-weight: bold; margin-bottom: 20px; }
.hero-quote { font-size: 1.2rem; font-style: italic; border-left: 4px solid var(--c-sage); padding-left: 20px; max-width: 600px; }
.hero-ctas { margin-top: 30px; display: flex; gap: 15px; }
.cta { padding: 12px 24px; border-radius: 50px; border: none; font-family: var(--font-main); font-weight: bold; cursor: pointer; transition: 0.3s; background: #fff; color: #000; display: flex; align-items: center; gap: 8px; }
.cta:hover { transform: translateY(-3px); background: var(--c-sage); }
.cta.ghost { background: transparent; border: 2px solid #fff; color: #fff; }
.cta.ghost:hover { background: #fff; color: #000; }
.hero-right { height: 85%; display: flex; align-items: flex-end; }
.hero-cutout { height: 100%; width: auto; object-fit: contain; filter: drop-shadow(0 10px 30px rgba(0,0,0,0.5)); }

/* ... [Phần Body, Message Board, Footer Copy nguyên từ bản trước] ... */
/* NOTE: Giữ nguyên phần CSS Body bên dưới không đổi gì cả */
.notebook-layout-wrapper { max-width: 1200px; margin: 0 auto; padding: 60px 20px 100px; }
.d-body { display: grid; grid-template-columns: 300px 1fr; gap: 40px; }
.d-aside { position: sticky; top: 100px; align-self: start; }
.sticky-note { background: #fff7d1; padding: 25px 20px 40px; box-shadow: 2px 5px 10px rgba(0,0,0,0.1); transform: rotate(-1deg); position: relative; font-family: var(--font-hand-2); }
.tape-strip { position: absolute; top: -15px; left: 50%; transform: translateX(-50%); width: 100px; height: 35px; background: rgba(255,255,255,0.4); backdrop-filter: blur(2px); border: 1px solid rgba(255,255,255,0.2); }
.aside-title { font-size: 1.4rem; font-weight: bold; border-bottom: 2px dashed #ccc; padding-bottom: 5px; margin-bottom: 15px; }
.aside-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 1.1rem; }
.bullets li { margin-bottom: 6px; list-style: inside square; }
.sticky-btn { width: 100%; margin-top: 15px; padding: 10px; background: transparent; border: 2px dashed var(--c-brown); color: var(--c-brown); font-weight: bold; cursor: pointer; transition: 0.2s; }
.sticky-btn:hover { background: var(--c-brown); color: #fff; border-style: solid; }
.d-article.notebook-paper { background: #fff; padding: 50px 50px 80px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); background-image: linear-gradient(#e1e1e1 1px, transparent 1px); background-size: 100% 30px; line-height: 30px; position: relative; }
.paper-holes { position: absolute; left: 15px; top: 0; bottom: 0; width: 30px; background-image: radial-gradient(#f4f1ea 20%, transparent 20%); background-size: 30px 30px; border-right: 2px solid #ff9a8b; }
.article-chip { display: inline-block; background: var(--c-sage); padding: 2px 12px; border-radius: 20px; font-weight: bold; font-family: var(--font-hand-2); transform: rotate(-2deg); margin-bottom: 20px; }
.article-meta { font-family: 'Courier New', monospace; opacity: 0.6; text-align: right; margin-top: -30px; }
.story-content p { font-family: var(--font-hand-2); font-size: 1.3rem; color: var(--c-brown); margin-bottom: 30px; }
.story-figure { position: relative; margin: 40px 0; padding: 10px 10px 40px; background: #fff; transform: rotate(1deg); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
.paper-clip { position: absolute; top: -15px; right: 20px; width: 15px; height: 45px; border: 4px solid #999; border-radius: 20px; z-index: 10; }
.story-figure img { width: 100%; display: block; filter: sepia(0.2); }
.story-figure figcaption { position: absolute; bottom: 5px; left: 0; width: 100%; text-align: center; font-family: var(--font-hand); color: #666; font-size: 1.4rem; }
.gallery-head { text-align: center; margin-bottom: 30px; }
.polaroids { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
.polaroid { background: #fff; padding: 10px 10px 40px; box-shadow: 2px 5px 10px rgba(0,0,0,0.15); transform: rotate(var(--r)); transition: 0.3s; }
.polaroid:hover { transform: scale(1.1) rotate(0deg) !important; z-index: 10; }
.polaroid img { width: 100%; aspect-ratio: 1/1; object-fit: cover; filter: grayscale(0.2); border: 1px solid #eee; }
.polaroid .cap { position: absolute; bottom: 10px; width: 100%; text-align: center; font-family: var(--font-hand-2); color: #555; left: 0; }
.endcap { margin-top: 60px; text-align: center; padding: 40px; background: rgba(0,0,0,0.02); border-radius: 20px; }
.stamp-seal { display: inline-block; padding: 10px 20px; border: 3px solid #c0392b; color: #c0392b; font-family: 'Courier New', monospace; font-weight: bold; font-size: 1.5rem; transform: rotate(-8deg); opacity: 0.8; margin-bottom: 20px; }
.message-section { margin-top: 60px; padding: 40px; background: #eaddcf; background-image: url("https://www.transparenttextures.com/patterns/cork-board.png"); border: 15px solid #5d4037; border-radius: 10px; box-shadow: inset 0 0 20px rgba(0,0,0,0.3), 0 20px 40px rgba(0,0,0,0.1); position: relative; scroll-margin-top: 100px; }
.corkboard-header { text-align: center; margin-bottom: 30px; }
.corkboard-header h2 { font-size: 2.5rem; color: #3e2723; text-shadow: 0 1px 1px rgba(255,255,255,0.5); }
.corkboard-header p { font-family: var(--font-hand-2); font-size: 1.2rem; color: #5d4037; }
.corkboard-wall { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; min-height: 200px; padding: 10px; }
.pinned-note { width: 200px; min-height: 180px; padding: 20px 15px; background: #fff; box-shadow: 3px 5px 10px rgba(0,0,0,0.2); font-family: var(--font-hand-2); font-size: 1.1rem; position: relative; transition: 0.3s; transform: rotate(var(--r, 0deg)); }
.pinned-note:hover { transform: scale(1.1) rotate(0deg) !important; z-index: 10; }
.pinned-note .pin { position: absolute; top: -8px; left: 50%; transform: translateX(-50%); width: 14px; height: 14px; border-radius: 50%; background: #e53935; box-shadow: 1px 2px 2px rgba(0,0,0,0.3); }
.fixed-nav { position: fixed; top: 0; left: 0; width: 100%; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; z-index: 9000; transition: transform 0.1s ease, background 0.1s, opacity 0.1s, visibility 0.1s; transform: translateY(0); }
.fixed-nav.scrolled { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); box-shadow: 0 5px 20px rgba(0,0,0,0.05); }
@media (max-width: 800px) { .d-body { grid-template-columns: 1fr; } .polaroids { grid-template-columns: 1fr; } .hero-inner { flex-direction: column; justify-content: flex-end; align-items: flex-start; } .hero-right { position: absolute; bottom: 0; right: -50px; height: 50%; opacity: 0.8; z-index: -1; } .hero-name-small { font-size: 3.5rem; } .full-name { font-size: 3.5rem; } .thanks-card { width: 95vw; } }
.thanks-card { background: #fff; width: min(500px, 95vw); border-radius: 2px; box-shadow: 10px 10px 0 rgba(0,0,0,0.2); border: 1px solid #000; }
.thanks-head { background: var(--c-brown); color: #fff; padding: 15px; display: flex; justify-content: space-between; }
.thanks-body { padding: 20px; }
.thanks-input { width: 100%; border: none; border-bottom: 2px solid #ccc; margin-bottom: 15px; padding: 10px; font-size: 1.1rem; }
/* =========================================
   VINTAGE POSTCARD MODAL (BẢN ĐỘ GỬI LỜI NHẮN)
   ========================================= */
.thanks-modal {
    position: fixed; inset: 0; z-index: 20000;
    display: none; justify-content: center; align-items: center;
    padding: 20px;
}
.thanks-modal.show { display: flex !important; }

/* Lớp nền rêu mờ ảo phía sau */
.thanks-overlay {
    position: absolute; inset: 0;
    background: rgba(46, 59, 44, 0.6); 
    backdrop-filter: blur(4px);
}
.thanks-modal.closing {
    animation: fadeOutOverlay 0.4s forwards;
}

.thanks-modal.closing .vintage-postcard {
    /* Hiệu ứng giấy rơi từ từ xuống dưới và xoay nhẹ */
    animation: foldAwayPaper 0.4s forwards cubic-bezier(0.55, 0.085, 0.68, 0.53);
}

@keyframes foldAwayPaper {
    0% { opacity: 1; transform: scale(1) rotate(-1.5deg) translateY(0); }
    100% { opacity: 0; transform: scale(0.8) rotate(8deg) translateY(80px); }
}

@keyframes fadeOutOverlay {
    0% { opacity: 1; }
    100% { opacity: 0; }
}

/* Tấm thiệp giấy kẻ ngang */
.vintage-postcard {
    position: relative;
    width: min(480px, 95vw);
    background: #fdfbf7;
    /* Tạo hiệu ứng giấy học sinh kẻ ngang */
    background-image: linear-gradient(#e1e1e1 1px, transparent 1px);
    background-size: 100% 32px; 
    padding: 45px 35px 35px;
    border-radius: 4px;
    box-shadow: 5px 15px 40px rgba(0,0,0,0.3);
    transform: rotate(-1.5deg); /* Để hơi nghiêng cho tự nhiên */
    animation: popInPaper 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    z-index: 10;
    border: 1px solid #e6dfd1;
}

@keyframes popInPaper {
    0% { opacity: 0; transform: scale(0.8) rotate(-8deg) translateY(50px); }
    100% { opacity: 1; transform: scale(1) rotate(-1.5deg) translateY(0); }
}

/* Băng keo dán thiệp */
.vintage-postcard .tape-strip {
    position: absolute; top: -15px; left: 50%;
    transform: translateX(-50%) rotate(2deg);
    width: 120px; height: 35px;
    background: rgba(255,255,255,0.6);
    backdrop-filter: blur(2px);
    border: 1px solid rgba(255,255,255,0.3);
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

/* Nút X xé nháp */
.thanks-close {
    position: absolute; top: 15px; right: 15px;
    background: transparent; border: none;
    font-size: 1.8rem; color: #8d6e63;
    cursor: pointer; transition: 0.2s;
}
.thanks-close:hover { color: #e53935; transform: scale(1.1) rotate(90deg); }

/* Header tấm thiệp */
.postcard-header {
    display: flex; justify-content: space-between; align-items: flex-start;
    margin-bottom: 20px; border-bottom: 2px dashed #d7ccc8; padding-bottom: 10px;
}
.postcard-header h3 { font-size: 2.8rem; color: var(--c-brown); margin: 0; line-height: 1; }
.stamp-decor { color: var(--c-sunset-dark); font-size: 2.5rem; opacity: 0.4; transform: rotate(15deg); }

/* Chữ hướng dẫn */
.guide-text { color: #795548; font-size: 1.2rem; margin-bottom: 25px; opacity: 0.8; }

/* Form nhập liệu trên dòng kẻ ngang */
.vintage-input, .vintage-textarea {
    width: 100%; background: transparent; border: none;
    font-size: 1.3rem; color: var(--c-brown); font-weight: bold;
    margin-bottom: 15px; resize: none;
}
.vintage-input:focus, .vintage-textarea:focus { outline: none; }
.vintage-input { border-bottom: 2px solid #a1887f; padding: 5px 0; }
.vintage-textarea {
    line-height: 32px; /* Dòng chữ phải khớp khít với dòng kẻ ngang của nền */
    padding-top: 6px;
    font-weight: normal;
}
.vintage-input::placeholder, .vintage-textarea::placeholder { color: #bcaaa4; font-weight: normal; }

/* Nút Submit kiểu con tem */
.vintage-submit-btn {
    width: 100%;
    background: var(--c-brown); color: #fff;
    border: 2px dashed #fdfbf7; /* Viền đứt khúc bên trong */
    padding: 12px; font-size: 1.3rem; font-family: var(--font-hand-2);
    border-radius: 6px; cursor: pointer; transition: all 0.3s;
    box-shadow: 0 0 0 4px var(--c-brown); /* Viền ngoài bao bọc */
    margin-top: 15px; font-weight: bold;
}
.vintage-submit-btn:hover {
    background: var(--c-dark-green); box-shadow: 0 0 0 4px var(--c-dark-green);
    transform: translateY(-3px);
}
@keyframes fadeDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes zoomIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
@keyframes fadeIn { to { opacity: 1; } }
/* Bỏ gạch chân cho nút Quay lại */
.nav-btn{ border:none; cursor:pointer; padding:10px 16px; border-radius:20px; background:var(--c-brown); color:var(--c-cream); font-family:var(--font-hand-2); font-weight:800; transition:.22s; box-shadow: 0 4px 10px rgba(93, 64, 55, 0.3); 
    text-decoration: none !important;
}

/* Đảm bảo khi rê chuột vào cũng không hiện gạch chân */
.nav-btn:hover {
    text-decoration: none !important;
    transform:translateY(-2px); 
    background: var(--c-dark-green);
}

/* =========================================
   PETALS ANIMATION (Cánh hoa rơi)
   ========================================= */
.petals {
    /* Đổi từ fixed sang absolute để nhốt cánh hoa vào đúng section chứa nó */
    position: absolute; 
    top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none; 
    z-index: 0; /* Hạ z-index xuống để cánh hoa bay chìm dưới các tờ giấy note */
    overflow: hidden;
}

.petal {
    position: absolute; top: -10%; display: block;
    width: 15px; height: 15px; background: #ffcdd2; /* Màu hồng phấn */
    border-radius: 100% 0 100% 0; /* Hình dáng cánh hoa */
    opacity: 0.6;
    animation: petal-fall linear infinite;
    box-shadow: 1px 1px 2px rgba(0,0,0,0.1);
}

/* Thêm vài màu khác cho sinh động */
.petal:nth-child(2n) { background: #ffeb3b; } /* Vàng nhạt */
.petal:nth-child(3n) { background: #b2dfdb; } /* Xanh mint nhạt */

@keyframes petal-fall {
    0% { top: -10%; transform: translateX(0) rotate(0deg); opacity: 0; }
    10% { opacity: 0.8; }
    50% { transform: translateX(50px) rotate(180deg); }
    100% { top: 110%; transform: translateX(-50px) rotate(360deg); opacity: 0; }
}

@font-face {
    font-family: "Timmons NY";
    src: url("https://db.onlinewebfonts.com/t/26b4978e67a51484ed7bccea1ffb38b8.eot");
    src: url("https://db.onlinewebfonts.com/t/26b4978e67a51484ed7bccea1ffb38b8.eot?#iefix")format("embedded-opentype"),
    url("https://db.onlinewebfonts.com/t/26b4978e67a51484ed7bccea1ffb38b8.woff2")format("woff2"),
    url("https://db.onlinewebfonts.com/t/26b4978e67a51484ed7bccea1ffb38b8.woff")format("woff"),
    url("https://db.onlinewebfonts.com/t/26b4978e67a51484ed7bccea1ffb38b8.ttf")format("truetype"),
    url("https://db.onlinewebfonts.com/t/26b4978e67a51484ed7bccea1ffb38b8.svg#TIMMONSNY-Regular")format("svg");
}

/* =========================
   INTRO PRELOADER (SCOPED)
   ========================= */
.intro-section{
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: var(--c-cream);
  z-index: 10050; /* nằm trên web chính trong lúc intro chạy */
}

/* Chỉ reset trong intro, không phá layout web chính */
.intro-section *{
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.intro-section .hero{
  position: relative;
  width: 100vw;
  height: 100vh;
  padding: 0;              /* ✅ bỏ padding để không hở viền */
  overflow: hidden;
}

.intro-section .pre-loader{
  width: 200%;
  height: 100%;
  padding: 2em;
  position: fixed;
  top: 0;
  right: 0;
  display: flex;
  justify-content: flex-end;
  align-items: flex-end;
  overflow: hidden;
  z-index: 2;
}

.intro-section .pre-loader p{
  width: max-content;
  text-transform: uppercase;
  font-family: var(--font-hand-2);
  font-size: 60px;
  line-height: 60px;
  padding-right: 10px;
}

.intro-section .counter{
  height: 100px;
  display: flex;
  font-family: var(--font-hand-2);
  font-size: 100px;
  font-weight: 400;
  line-height: 150px;
  clip-path: polygon(0 0, 100% 0, 100% 100px, 0 100px);
}

.intro-section .digit-1,
.intro-section .digit-2,
.intro-section .digit-3,
.intro-section .digit-4{
  position: relative;
  top: -15px;
}

.intro-section .offset{ position: relative; right: -7.5px; }

.intro-section .progress-bar{
  position: relative;
  top: -15px;
  width: 0%;
  height: 4px;
  background: var(--c-brown);
}

.intro-section .hero-imgs{
  position: absolute;      /* ✅ cho ảnh phủ full viewport */
  inset: 0;
  width: 100%;
  height: 100%;
  transform-origin: 50% 50%;
}

/* ✅ CHỈ áp clip-path cho ảnh trong intro */
.intro-section .hero-imgs > img{
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: cover;
  clip-path: polygon(50% 0%, 50% 0%, 50% 100%, 50% 100%);
}

/* Nếu bạn có .header/h1 demo thì cũng scope luôn để không đè các H1 khác */
.intro-section .header{
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.intro-section h1{
  text-transform: uppercase;
  font-family: "PP Neue World";
  font-size: 20vw;
  font-weight: 200;
  color: #fafafa;
  clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
}

.intro-section h1 span{
  position: relative;
  top: 400px;
}

@media (max-width: 900px) {
  .intro-section .pre-loader { padding: 1em; gap: 0.5em; }
  .intro-section .counter { font-size: 70px; }
  .intro-section .pre-loader p { font-size: 40px; line-height: 64px; }
  .intro-section .offset { right: -5px; }
}

/* ============ PHOTO LIGHTBOX ============ */
.polaroid { cursor: zoom-in; }

.photo-modal{
  position: fixed;
  inset: 0;
  z-index: 30000;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 40px 18px;
  background: rgba(0,0,0,0.62);
  backdrop-filter: blur(6px);
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

.photo-modal.show{
  visibility: visible;
  pointer-events: auto;
}

.photo-close{
  position: fixed;
  top: 18px;
  right: 18px;
  width: 44px;
  height: 44px;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  background: var(--c-cream);
  color: #2b2b2b;
  font-size: 22px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
}

.photo-stage{
  width: min(980px, 96vw);
}

/* ✅ chống mọi style img “global” bị đè (clip-path/absolute) */
.photo-modal{
  background: radial-gradient(circle at 30% 20%,
    rgba(255, 244, 220, 0.16),
    rgba(0,0,0,0.70) 65%,
    rgba(0,0,0,0.84) 100%);
}

/* figure nhìn như tấm ảnh kỷ niệm */
.photo-figure{
  width: 100%;
  border-radius: 18px;
  padding: 16px 16px 22px;
  transform-origin: 50% 50%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}

/* ✅ quan trọng: để browser giữ đúng tỉ lệ, không bị crop */
.photo-figure img{
  position: static !important;
  width: auto !important;
  height: auto !important;
  max-width: 100%;
  max-height: 72vh;
  object-fit: contain;
  clip-path: none !important;
  filter: none !important;
  border-radius: 14px;
  display: block;
}

.photo-caption{
  margin-top: 12px;
  text-align: center;
  font-size: 20px;
  color: var(--c-cream);
  font-family: var(--font-hand-2);
  opacity: 0.9;
  max-width: 900px;
}

/* animation “bay” */
.photo-fly{
  position: fixed;
  z-index: 40000;
  object-fit: cover;
  border-radius: 10px;
  box-shadow: 0 25px 90px rgba(0,0,0,0.42);
  will-change: transform, width, height, left, top, opacity;
}

.photo-caption .pc-title{
  font-weight: 900;
  font-size: 1.25rem;
  margin-bottom: 6px;
}
.photo-caption .pc-desc{
  opacity: 0.9;
  line-height: 1.5;
}

.craft-tag-player {
    position: relative;
    /* Màu giấy craft hơi ngả vàng nâu */
    background: var(--c-cream); 
    /* Tạo viền hơi sần và bóng đổ nhẹ */
    border: 1px solid #d7ccc8;
    box-shadow: 
        inset 0 0 5px rgba(0,0,0,0.05), /* Bóng trong tạo độ sâu */
        3px 3px 10px rgba(93, 64, 55, 0.15); /* Bóng ngoài tạo độ nổi */
    border-radius: 12px; /* Bo góc mềm mại hơn */
    padding: 12px;
    margin: 25px 0 20px;
    transform: rotate(-2deg); /* Nghiêng nhẹ cho tự nhiên */
}

/* Miếng băng keo dán góc trên trái */
.tape-strip-corner {
    position: absolute;
    top: -10px; left: -12px;
    width: 50px; height: 20px;
    background: rgba(255,255,255,0.4);
    transform: rotate(-45deg);
    backdrop-filter: blur(1px);
    border: 1px solid rgba(255,255,255,0.2);
    box-shadow: 1px 1px 3px rgba(0,0,0,0.1);
}

.tag-content-wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
}

/* --- CÁC THÀNH PHẦN CON --- */

/* 1. Đĩa than nhỏ (Size S) */
.vinyl-record-s {
    width: 38px; height: 38px;
    background: #2b2b2b;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
    position: relative;
    border: 1px solid #1a1a1a;
}
.vinyl-record-s::before { content: ''; position: absolute; inset: 3px; border: 1px solid rgba(255,255,255,0.15); border-radius: 50%; }
.record-label-s {
    width: 12px; height: 12px;
    background: var(--c-sunset-dark); /* Màu đỏ gạch */
    border-radius: 50%; z-index: 2; border: 1px solid #111;
}
.record-label-s::after {
    content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    width: 3px; height: 3px; background: #f0e6d2; border-radius: 50%;
}
/* Animation xoay giữ nguyên */
.spin-animation { animation: spin-record 2.5s linear infinite; }

/* 2. Thông tin giữa */
.tag-center { flex: 1; display: flex; flex-direction: column; justify-content: center; padding-left: 5px; }
.tag-filename {
    font-size: 1.1rem; /* Dùng font viết tay Patrick Hand cho tự nhiên */
    color: var(--c-brown);
    font-weight: bold;
    line-height: 1;
    margin-bottom: 4px;
}

/* Sóng âm nhỏ (Size S) */
.wave-container-s { 
    display: flex; 
    align-items: center; 
    gap: 2px; 
    height: 14px; 
    opacity: 0.5; 
    transition: opacity 0.3s; 
}

.wave-container-s.playing { 
    opacity: 1; 
}

.wave-container-s .bar { 
    width: 3px; 
    height: 3px; 
    background: var(--c-sunset); /* Màu cam nhạt lúc dừng */
    border-radius: 2px; 
    transition: height 0.1s ease; 
}

/* 1. Gắn chuyển động khi có class playing */
.wave-container-s.playing .bar { 
    animation: wave-bounce 1s infinite ease-in-out; 
}

/* 2. Tạo độ trễ (delay) cho từng cột để nó lượn lên xuống so le nhau */
.wave-container-s.playing .bar:nth-child(1) { animation-delay: 0.0s; }
.wave-container-s.playing .bar:nth-child(2) { animation-delay: 0.2s; }
.wave-container-s.playing .bar:nth-child(3) { animation-delay: 0.4s; }
.wave-container-s.playing .bar:nth-child(4) { animation-delay: 0.1s; }
.wave-container-s.playing .bar:nth-child(5) { animation-delay: 0.3s; }
.wave-container-s.playing .bar:nth-child(6) { animation-delay: 0.15s; }

/* 3. Định nghĩa độ cao lúc nhấp nhô */
@keyframes wave-bounce {
    0%, 100% { height: 3px; background: var(--c-sunset); }
    50% { height: 14px; background: var(--c-sunset-dark); } /* Cao lên và đổi màu đậm hơn */
}

/* 3. Nút Play & Thời gian bên phải */
.tag-right { display: flex; flex-direction: column; align-items: center; gap: 5px; }

.craft-play-btn {
    width: 34px; height: 34px;
    border-radius: 50%;
    /* Màu nâu đậm của gỗ/da */
    background: var(--c-brown); 
    color: #f0e6d2; /* Icon màu kem */
    border: 2px solid #3e2723;
    font-size: 0.9rem;
    display: flex; justify-content: center; align-items: center;
    cursor: pointer; transition: all 0.2s;
    box-shadow: inset 0 2px 3px rgba(255,255,255,0.2), 0 2px 4px rgba(0,0,0,0.3);
}
.craft-play-btn:hover { transform: scale(1.1); background: var(--c-dark-green); border-color: var(--c-dark-green); }
.craft-play-btn:active { transform: scale(0.95); }
.craft-play-btn i { align-items: center; } /* Căn giữa icon play */

.tag-time {
    font-family: 'Courier New', monospace;
    font-size: 0.7rem;
    font-weight: bold;
    color: #795548;
}

.story-figure img,
.story-figure video {
    width: 100%;
    display: block;
    border-radius: 4px; /* Bo góc cực nhẹ cho tự nhiên */
    filter: sepia(0.2) contrast(1.05); /* Phủ màu hoài cổ lên cả video */
    background: #e8e4d9; /* Lót nền phòng khi video load chậm */
    object-fit: cover; /* Đảm bảo video không bị méo tỉ lệ */
}

/* Ẩn các khối story rỗng (phòng hờ) */
.story-content:empty {
    display: none;
}

.vintage-video-wrapper {
    position: relative;
    width: 100%;
    border-radius: 4px;
    overflow: hidden;
    background: #2b2b2b; /* Lót nền tối nếu video chưa load */
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

.vintage-video-wrapper video {
    width: 100%;
    display: block;
    filter: sepia(0.2) contrast(1.05); /* Giữ màu hoài cổ phim nhựa */
    object-fit: cover;
    max-height: 60vh; /* Khống chế chiều cao không quá dài */
}

/* Nút Play to bự ở giữa video */
.video-play-overlay {
    position: absolute;
    width: 65px;
    height: 65px;
    background: rgba(240, 230, 210, 0.85); /* Màu giấy craft trong suốt nhẹ */
    border: 3px solid var(--c-brown);
    color: var(--c-brown);
    border-radius: 50%;
    font-size: 1.8rem;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    z-index: 10;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    backdrop-filter: blur(3px); /* Hiệu ứng kính mờ đằng sau nút */
}

.video-play-overlay i {
    margin-left: 5px; /* Căn giữa icon play (vì icon tam giác bị lệch trọng tâm) */
}

.video-play-overlay:hover {
    background: var(--c-brown);
    color: #f0e6d2;
    transform: scale(1.1);
}
